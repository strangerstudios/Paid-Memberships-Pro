(()=>{"use strict";const e=window.wp.blocks;function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e},t.apply(this,arguments)}const s=window.wp.element,l=window.wp.i18n,n=window.wp.components,r=window.wp.blockEditor,i=JSON.parse('{"u2":"pmpro/membership"}');(0,e.registerBlockType)(i.u2,{icon:{background:"#FFFFFF",foreground:"#1A688B",src:"visibility"},edit:function(e){const i=(0,r.useBlockProps)({}),{attributes:{invert_restrictions:o,segment:a,levels:c,show_noaccess:p},setAttributes:m,isSelected:u}=e;if(c.length>0&&"all"==a)if(c.includes("0"))if(1==c.length)m({invert_restrictions:"1",segment:"all",levels:[]});else{const e=pmpro.all_level_values_and_labels.map((e=>e.value+"")).filter((e=>!c.includes(e)));m({invert_restrictions:"1",segment:"specific",levels:e})}else m({invert_restrictions:"0",segment:"specific"});function _(e){const t=pmpro.all_level_values_and_labels.map((e=>e.value+""));m({levels:e?t:[]})}var b=pmpro.all_level_values_and_labels.map((function(e){return[(0,s.createElement)(n.CheckboxControl,{label:e.label,checked:c.some((t=>t==e.value)),onChange:function(t){if(t&&!c.some((t=>t==e.value))){const t=c.slice();t.push(e.value+""),m({levels:t})}else if(!t&&c.some((t=>t==e.value))){const t=c.filter((t=>t!=e.value));m({levels:t})}}})]}));return[u&&(0,s.createElement)(r.InspectorControls,null,(0,s.createElement)(n.PanelBody,{title:(0,l.__)("Content Visibility","paid-memberships-pro"),initialOpen:!0},(0,s.createElement)(n.__experimentalHStack,null,(0,s.createElement)(n.Button,{className:"pmpro-block-require-membership-element__set-show-button",icon:"visibility",variant:"0"===o?"primary":"secondary",style:{flexGrow:"1",justifyContent:"center"},onClick:()=>m({invert_restrictions:"0"})},(0,l.__)("Show","your-text-domain")),(0,s.createElement)(n.Button,{className:"pmpro-block-require-membership-element__set-hide-button",icon:"hidden",variant:"1"===o?"primary":"secondary",style:{flexGrow:"1",justifyContent:"center"},onClick:()=>m({invert_restrictions:"1"})},(0,l.__)("Hide","your-text-domain"))),(0,s.createElement)("br",null),(0,s.createElement)(n.SelectControl,{value:a,label:"1"===o?(0,l.__)("Hide content from:","paid-memberships-pro"):(0,l.__)("Show content to:","paid-memberships-pro"),options:[{label:(0,l.__)("All Members","paid-memberships-pro"),value:"all"},{label:(0,l.__)("Specific Membership Levels","paid-memberships-pro"),value:"specific"},{label:(0,l.__)("Logged-In Users","paid-memberships-pro"),value:"logged_in"}],onChange:e=>{m({segment:e,levels:[]})}}),"specific"==a&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)("p",null,(0,s.createElement)("strong",null,(0,l.__)("Membership Levels","paid-memberships-pro"))),(0,s.createElement)("p",null,(0,l.__)("Select","paid-memberships-pro")," ",(0,s.createElement)("a",{href:"#",onClick:e=>{e.preventDefault(),_(!0)}},(0,l.__)("All","paid-memberships-pro"))," | ",(0,s.createElement)("a",{href:"#",onClick:e=>{e.preventDefault(),_(!1)}},(0,l.__)("None","paid-memberships-pro"))),(0,s.createElement)("div",{class:"pmpro-block-inspector-scrollable"},b)),"0"==o&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(n.SelectControl,{value:p,label:(0,l.__)("Show No Access Message?","paid-memberships-pro"),help:(0,l.__)("Modify the 'no access' message on the Memberships > Advanced Settings page.","paid-memberships-pro"),options:[{label:(0,l.__)("No - Hide this block if the user does not have access","paid-memberships-pro"),value:"0"},{label:(0,l.__)("Yes - Show the 'no access' message if the user does not have access","paid-memberships-pro"),value:"1"}],onChange:e=>m({show_noaccess:e})})))),(0,s.createElement)("div",t({className:"pmpro-block-require-membership-element"},i),(0,s.createElement)(r.InnerBlocks,{templateLock:!1}),(0,s.createElement)("span",{className:"pmpro-block-note"},(0,s.createElement)("span",{class:"dashicon dashicons dashicons-lock"}),(0,l.__)("This block has content visibility settings.","paid-memberships-pro")))]},save:function(){const e=r.useBlockProps.save();return(0,s.createElement)("div",e,(0,s.createElement)(r.InnerBlocks.Content,null))}})})();